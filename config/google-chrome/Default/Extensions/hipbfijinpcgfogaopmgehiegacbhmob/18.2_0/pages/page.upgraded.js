"use strict";(function(){var a=devhd.pkg("pages");a.UpgradedPage=function(){};var b=a.UpgradedPage.prototype=new a.BasePage();b.allowsSideArea=function(){return false};b.allowsPageHeader=function(){return false};b.service=function(d,c){this.pageInfo=d;this.width=c.width;this.initBase(c);if(this.home.isProPlan()==false){this.feedly.redirect("pro");return
}this.startRenderHTML()};b.destroy=function(){this.destroyBase()};b.startRenderHTML=function(){this.feedly.setPageTitle("feedly Pro");this.pageElem.innerHTML=templates.page.upgraded.layout(this.home.getUserId(),this.profile.getUserInfo())};b.askStopRenewal=function(){this.analytics.trackPageview("sales/pro/stop renewal");this.analytics.trackEvent("sales.pro","stop renewal");
var c=this;$feedly("[feedly] stopping renewal...");this.element("stopRenewal").innerHTML="processing...";this.home.service("io").del("!{cloud}/v3/payment?userId="+c.home.getUserId()+"&ck="+new Date().getTime()+"&ct=feedly.desktop&cv="+feedlyApplicationVersion,function(d){try{c.analytics.trackPageview("sales/pro/stopped renewal");c.analytics.trackEvent("sales.pro","stopped renewal");
$feedly("[feedly] stopped renewal successful. "+d);try{c.element("stopRenewal").innerHTML="cancelled successfully"}catch(g){}}catch(f){$feedly("Downgrade failed:"+f.name+" -- "+f.message);window.alert("Error. Please contact pro@feedly.com");c.analytics.trackPageview("sales/pro/stopped renewal/exception");c.analytics.trackEvent("sales.pro","stopped renewal.exception")
}},function(d,e){window.alert("Error:"+d+". Please contact pro@feedly.com");c.analytics.trackPageview("sales/pro/stopped renewal/error");c.analytics.trackEvent("sales.pro","stopped renewal.error",d)},"application/json",{"$Authorization.feedly":"$FeedlyAuth","Content-Type":"application/json"})}})();